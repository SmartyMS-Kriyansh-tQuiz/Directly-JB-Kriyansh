<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Signature Link Generator</title>
</head>
<body>
  <h2>Signature Link Generator</h2>
  <div id="output"></div>

  <script>
    function getQueryParam(name) {
      let urlParams = new URLSearchParams(window.location.search);
      return urlParams.get(name);
    }

    let inputUrl = getQueryParam("url");
    if (inputUrl) {
      let randomId = crypto.randomUUID();
      let signatureUrl = `https://sec-prod-mediacdn.pw.live/${randomId}/master.mpd?URLPrefix=aHR0cHM6Ly9zZWMtcHJvZC1tZWRpYWNkbi5wdy5saXZl&Expires=${Date.now()+3600}&KeyName=pw-prod-key&Signature=RANDOM_SIGNATURE`;

      document.getElementById("output").innerHTML = `
        <b>Signature URL:</b><br>
        <a href="render.html?url=${encodeURIComponent(signatureUrl)}">${signatureUrl}</a><br><br>
        <a href="replace.html?url=${encodeURIComponent(signatureUrl)}">Replace .mpd with .m3u8</a>
      `;
    }
  </script>
</body>
</html>